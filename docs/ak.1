.TH AK 1 "2025-09-20" "AK 4.6.0" "AK Manual"
.SH NAME
ak \- Secure API Key Manager (CLI)
.SH SYNOPSIS
.B ak
.RI [ --json ]
.RI < command >
.RI [ options ]
.RI [ arguments ]
.br
.B ak help
.br
.B ak completion
.RI { bash | zsh | fish }
.br
.B ak serve
.RI [ --host HOST ]
.RI [ --port PORT ]
.SH DESCRIPTION
.B ak
is a cross\-platform command\-line tool for managing API keys securely across services. It provides:
.br
\- Encrypted storage and profile\-scoped key management
.br
\- Service definitions with connectivity testing
.br
\- Shell integration and completions (bash/zsh/fish)
.br
\- Lightweight HTTP server for the web interface
.SH COMMANDS
.SS Secret Management
.TP
.B ak add \fINAME\fR \fIVALUE\fR
Add a secret with value directly (also supports \fINAME=VALUE\fR). Use \fB\-p\fR/\fB\-\-profile\fR to add to a profile.
.TP
.B ak set \fINAME\fR
Prompt to set a secret value interactively.
.TP
.B ak get \fINAME\fR [\fB\-\-full\fR]
Get a secret value (\fB\-\-full\fR shows unmasked).
.TP
.B ak ls
List secret names (masked values in non\-JSON mode).
.TP
.B ak rm \fINAME\fR
Remove a secret from the vault.
.TP
.B ak rm \fB\-\-profile\fR \fINAME\fR
Remove an entire profile.
.TP
.B ak search \fIPATTERN\fR
Search for secrets by name (case\-insensitive).
.TP
.B ak cp \fINAME\fR
Copy secret value to clipboard (pbcopy/wl\-copy/xclip).
.TP
.B ak purge [\fB\-\-no\-backup\fR]
Remove all secrets and profiles (creates backup by default unless \fB\-\-no\-backup\fR).
.SS Profile Management
.TP
.B ak save \fIPROFILE\fR [\fINAMES...\fR]
Save named secrets to a profile (all secrets if none given).
.TP
.B ak load \fIPROFILE|KEY\fR [\fB\-\-persist\fR]
Print export statements to load env vars; \fB\-\-persist\fR remembers the profile for the current directory.
.TP
.B ak unload [\fIPROFILE...\fR] [\fB\-\-persist\fR]
Print unset statements for profile keys; with \fB\-\-persist\fR remove remembered profile(s) for the current directory.
.TP
.B ak profiles
List available profiles with key counts.
.TP
.B ak duplicate \fISOURCE\fR \fIDEST\fR
Duplicate a profile.
.TP
.B ak env \fB\-\-profile\fR|\fB\-p\fR \fINAME\fR
Show profile as export statements.
.SS Export / Import
.TP
.B ak export \fB\-\-profile\fR|\fB\-p\fR \fIPROFILE\fR \fB\-\-format\fR|\fB\-f\fR \fIFORMAT\fR \fB\-\-output\fR|\fB\-o\fR \fIFILE\fR
Export profile to file. Formats: \fBenv\fR, \fBdotenv\fR, \fBjson\fR, \fByaml\fR.
.TP
.B ak import \fB\-\-profile\fR|\fB\-p\fR \fIPROFILE\fR \fB\-\-format\fR|\fB\-f\fR \fIFORMAT\fR \fB\-\-file\fR|\fB\-i\fR \fIFILE\fR [\fB\-\-keys\fR]
Import secrets from file to profile. \fB\-\-keys\fR imports only known service provider keys.
.SS Service Management
.TP
.B ak service add
Create a new custom API service (interactive).
.TP
.B ak service list
List built\-in and custom services.
.TP
.B ak service edit \fINAME\fR
Edit an existing custom service (interactive).
.TP
.B ak service delete \fINAME\fR
Delete a custom service.
.SS Testing and Utilities
.TP
.B ak run \fB\-\-profile\fR|\fB\-p\fR \fIPROFILE\fR \fB\-\-\fR \fICMD...\fR
Run command with profile environment loaded.
.TP
.B ak test [\fISERVICE...\fR|\fB\-\-all\fR] [\fB\-\-json\fR] [\fB\-\-fail\-fast\fR] [\fB\-\-profile\fR|\fB\-p\fR \fINAME\fR]
Test connectivity for configured providers or specific services/keys.
.TP
.B ak guard \fIenable|disable\fR
Enable or disable shell guard for secret protection.
.TP
.B ak doctor
Show system configuration/dependencies summary.
.TP
.B ak audit [\fIN\fR]
Show audit log (last N entries, default 10).
.SS System
.TP
.B ak help
Show detailed help.
.TP
.B ak version
Show version information.
.TP
.B ak backend
Show backend info (\fBgpg\fR or \fBplain\fR).
.TP
.B ak serve [\fB\-\-host\fR \fIHOST\fR] [\fB\-\-port\fR \fIPORT\fR]
Start HTTP server for the web interface (serves \fI/web\-app.html\fR and related assets).
.TP
.B ak install\-shell
Install shell integration for auto\-loading.
.TP
.B ak uninstall
Remove shell integration.
.TP
.B ak completion \fBbash|zsh|fish\fR
Generate completion script for the specified shell.
.SH OPTIONS
.TP
.B \-h, \-\-help
Show help and exit.
.TP
.B \-v, \-\-version
Show version and exit.
.TP
.B \-\-json
Enable JSON output for supported commands.
.SH ENVIRONMENT
.TP
.B AK_DISABLE_GPG
If set, forces plain storage even if \fBgpg\fR is available.
.TP
.B AK_PASSPHRASE
Preset passphrase for \fBgpg\fR operations (non\-interactive).
.SH FILES
.TP
.B ~/.config/ak/
Default configuration directory.
.TP
.B ~/.config/ak/keys.env
Unencrypted vault file (when GPG unavailable/disabled).
.TP
.B ~/.config/ak/keys.env.gpg
Encrypted vault file (when GPG available).
.TP
.B ~/.config/ak/profiles/
Profile definitions.
.TP
.B ~/.config/ak/persist/
Directory\-profile persistence metadata.
.TP
.B ~/.config/ak/audit.log
Audit log file.
.SH EXAMPLES
.TP
Add/set/get/list/remove:
.br
.B ak add API_KEY "sk\-..."
.br
.B ak set API_KEY
.br
.B ak get API_KEY \-\-full
.br
.B ak ls
.br
.B ak rm API_KEY
.TP
Profiles:
.br
.B ak save dev API_KEY DB_URL
.br
.B ak load dev \-\-persist
.br
.B eval "$(ak load dev)"
.br
.B ak profiles
.TP
Export/import:
.br
.B ak export \-p dev \-f dotenv \-o dev.env
.br
.B ak import \-p dev \-f env \-i .env \-\-keys
.TP
Service testing:
.br
.B ak test \-\-all
.br
.B ak test openai \-\-fail\-fast
.TP
Completions:
.br
.B ak completion bash | sudo tee /etc/bash_completion.d/ak
.br
.B ak completion zsh | sudo tee /usr/share/zsh/site\-functions/_ak
.br
.B ak completion fish > ~/.config/fish/completions/ak.fish
.TP
HTTP server:
.br
.B ak serve \-\-host 127.0.0.1 \-\-port 8027
.br
Open \fIhttp://127.0.0.1:8027/web\-app.html\fR in a browser.
.SH DIAGNOSTICS
Exit status is 0 on success, non\-zero on error.
.SH BUGS
Report issues at: https://github.com/apertacodex/ak/issues
.SH COPYRIGHT
Copyright (C) 2024\-2025 ApertaCodex.
License: MIT with Attribution (see LICENSE).
.SH SEE ALSO
.BR gpg (1),
.BR pass (1)
.SH VERSION
This manual corresponds to AK version 4.6.0.
